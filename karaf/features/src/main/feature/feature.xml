<?xml version="1.0" encoding="UTF-8"?>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<features xmlns="http://karaf.apache.org/xmlns/features/v1.4.0"
          name="org.apache.brooklyn-${project.version}"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://karaf.apache.org/xmlns/features/v1.4.0">

    <repository>mvn:org.apache.karaf.features/standard/${karaf.version}/xml/features</repository>
    <repository>mvn:org.apache.cxf.karaf/apache-cxf/${cxf.version}/xml/features</repository>
    <repository>mvn:io.fabric8.kubernetes/kubernetes-karaf/${kubernetes-client.version}/xml/features</repository>

    <feature name="swagger" version="${swagger.version}" description="Swagger Annotations+Core+JAXRS+Models">
        <bundle dependency='true'>mvn:com.google.guava/guava/${guava-swagger.version}</bundle>
        <bundle dependency='true'>mvn:com.google.guava/failureaccess/${failureaccess.version}</bundle>

        <bundle>mvn:io.swagger/swagger-annotations/${swagger.version}</bundle>
        <bundle>wrap:mvn:io.swagger/swagger-core/${swagger.version}</bundle>
        <bundle>wrap:mvn:io.swagger/swagger-jaxrs/${swagger.version}</bundle>
        <bundle>mvn:io.swagger/swagger-models/${swagger.version}</bundle>

        <bundle dependency='true'>mvn:com.fasterxml.jackson.core/jackson-annotations/${fasterxml.jackson.version}</bundle>
        <bundle dependency='true'>mvn:com.fasterxml.jackson.core/jackson-core/${fasterxml.jackson.version}</bundle>
        <bundle dependency='true'>mvn:com.fasterxml.jackson.core/jackson-databind/${fasterxml.jackson.version}</bundle>
        <bundle dependency='true'>mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/${fasterxml.jackson.version}</bundle>
        <bundle dependency='true'>mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-base/${fasterxml.jackson.version}</bundle>
        <bundle dependency='true'>mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/${fasterxml.jackson.version}</bundle>
    </feature>

    <feature name="brooklyn-utils-common" version="${project.version}" description="Brooklyn Common Utils">
        <bundle>mvn:org.apache.brooklyn/brooklyn-utils-common/${project.version}</bundle>
        <bundle>mvn:org.apache.brooklyn/brooklyn-logback-includes/${project.version}</bundle>

        <bundle dependency="true">mvn:com.google.guava/guava/${guava.version}</bundle>
        <bundle dependency="true">mvn:org.codehaus.groovy/groovy-all/${groovy.version}</bundle>
        <bundle dependency="true">mvn:commons-io/commons-io/${commons-io.version}</bundle>
        <bundle dependency="true">mvn:commons-codec/commons-codec/${commons-codec.version}</bundle>
        <bundle dependency="true">mvn:org.slf4j/jul-to-slf4j/${slf4j.version}</bundle>
        <bundle dependency="true">mvn:org.yaml/snakeyaml/${snakeyaml.version}</bundle>
        <bundle dependency="true">mvn:org.apache.httpcomponents/httpcore-osgi/${httpcomponents.httpcore.version}</bundle>
        <bundle dependency="true">mvn:org.apache.httpcomponents/httpclient-osgi/${httpcomponents.httpclient.version}</bundle>

        <bundle dependency="true">mvn:ch.qos.logback/logback-classic/${logback.version}</bundle>
        <bundle dependency="true">mvn:ch.qos.logback/logback-core/${logback.version}</bundle>
    </feature>

    <feature name="brooklyn-utils-groovy" version="${project.version}" description="Brooklyn Groovy Utils">
        <feature>brooklyn-utils-common</feature>
        <bundle>mvn:org.apache.brooklyn/brooklyn-utils-common/${project.version}</bundle>
    </feature>

    <feature name="brooklyn-utils-rest-swagger" version="${project.version}" description="Brooklyn REST Swagger Apidoc Utilities">
        <feature>brooklyn-utils-common</feature>
        <feature version="${swagger.version}">swagger</feature>

        <bundle>mvn:org.apache.brooklyn/brooklyn-utils-rest-swagger/${project.version}</bundle>

        <bundle dependency="true">mvn:javax.servlet/javax.servlet-api/${javax-servlet.version}</bundle>
        <bundle dependency="true">mvn:javax.ws.rs/javax.ws.rs-api/${jax-rs-api.version}</bundle>

        <!-- TODO: version 1.1.0.Final has OSGi manifest; check if upgrade doesn't get rid of wrap -->
        <bundle dependency="true">wrap:mvn:javax.validation/validation-api/${validation-api.version}</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.reflections/${reflections.bundle.version}</bundle>
    </feature>

    <feature name="brooklyn-rest-api" version="${project.version}" description="Brooklyn REST API">
        <feature>brooklyn-utils-rest-swagger</feature>
        <feature>brooklyn-api</feature>
        <feature>brooklyn-core</feature>

        <bundle>mvn:org.apache.brooklyn/brooklyn-rest-api/${project.version}</bundle>

        <bundle dependency="true">mvn:org.jvnet.mimepull/mimepull/1.9.3</bundle>
        <bundle dependency="true">mvn:commons-lang/commons-lang/${commons-lang.version}</bundle>

        <!-- TODO: version 1.1.0.Final has OSGi manifest; check if upgrade doesn't get rid of wrap -->
        <bundle dependency="true">wrap:mvn:javax.validation/validation-api/${validation-api.version}</bundle>

        <bundle dependency="true">mvn:org.apache.commons/commons-lang3/${commons-lang3.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-annotations/${fasterxml.jackson.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-databind/${fasterxml.jackson.version}</bundle>

        <bundle dependency="true">mvn:javax.servlet/javax.servlet-api/${javax-servlet.version}</bundle>
    </feature>

    <feature name="brooklyn-rest-client" version="${project.version}" description="Brooklyn REST Client">
        <feature>brooklyn-rest-api</feature>
        <feature>swagger</feature>

        <bundle>mvn:org.apache.brooklyn/brooklyn-rest-client/${project.version}</bundle>

        <bundle dependency="true">mvn:org.apache.httpcomponents/httpclient-osgi/${httpclient.version}</bundle>
        <bundle dependency='true'>mvn:commons-logging/commons-logging/${commons-logging.version}</bundle>
        <bundle dependency='true'>mvn:commons-codec/commons-codec/${commons-codec.version}</bundle>

        <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jsr305/${jsr305.bundle.version}</bundle>
        <bundle dependency='true'>mvn:com.google.code.gson/gson/${gson.version}</bundle>

<!--        <bundle dependency='true'>wrap:mvn:javax.activation/activation/${javax-activation.version}</bundle>-->
        <bundle dependency="true">mvn:commons-io/commons-io/${commons-io.version}</bundle>
        <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jcip-annotations/${jcip-annotations.bundle.version}</bundle>

        <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-core/${fasterxml.jackson.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-annotations/${fasterxml.jackson.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-databind/${fasterxml.jackson.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/${fasterxml.jackson.version}</bundle>
        <bundle dependency='true'>mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-base/${fasterxml.jackson.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.module/jackson-module-jaxb-annotations/${fasterxml.jackson.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.datatype/jackson-datatype-guava/${fasterxml.jackson.version}</bundle>
    </feature>


    <feature name="brooklyn-api"  version="${project.version}" description="Brooklyn API">
        <feature>brooklyn-utils-common</feature>
        <bundle>mvn:org.apache.brooklyn/brooklyn-api/${project.version}</bundle>
    </feature>

    <feature name="brooklyn-core" version="${project.version}" description="Brooklyn Core">
        <feature>pax-jetty</feature>
        <feature>brooklyn-api</feature>

        <bundle>mvn:org.apache.brooklyn/brooklyn-core/${project.version}</bundle>
        <bundle>mvn:org.apache.brooklyn/brooklyn-utils-groovy/${project.version}</bundle>

        <bundle dependency="true">mvn:com.google.code.gson/gson/${gson.version}</bundle>
        <bundle dependency="true">mvn:com.jayway.jsonpath/json-path/${jsonPath.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-core/${fasterxml.jackson.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-databind/${fasterxml.jackson.version}</bundle>
        <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-annotations/${fasterxml.jackson.version}</bundle>

        <bundle dependency="true">mvn:net.minidev/json-smart/${jsonSmart.version}</bundle>
        <bundle dependency="true">mvn:net.minidev/accessors-smart/${minidev.accessors-smart.version}</bundle>
        <bundle dependency="true">mvn:org.ow2.asm/asm/${ow2.asm.version}</bundle>
        <bundle dependency="true">mvn:org.ow2.asm/asm-commons/${ow2.asm.version}</bundle>
        <bundle dependency="true">mvn:org.ow2.asm/asm-tree/${ow2.asm.version}</bundle>
        <bundle dependency="true">mvn:org.ow2.asm/asm-analysis/${ow2.asm.version}</bundle>
        <bundle dependency="true">mvn:org.ow2.asm/asm-util/${ow2.asm.version}</bundle>
        <bundle dependency="true">mvn:org.ops4j.pax.web/pax-web-spi/${pax-web.version}</bundle>
        <bundle dependency="true">mvn:org.apache.geronimo.specs/geronimo-ws-metadata_2.0_spec/${geronimo-ws-metadata_2.0_spec.version}</bundle>
        <bundle dependency="true">mvn:com.thoughtworks.xstream/xstream/${xstream.version}</bundle>
        <bundle dependency="true">mvn:org.freemarker/freemarker/${freemarker.version}</bundle>
        <bundle dependency="true">mvn:com.hierynomus/sshj/${sshj.version}</bundle>
        <bundle dependency="true">mvn:net.i2p.crypto/eddsa/${eddsa.version}</bundle><!-- from com.hierynomous/sshj -->
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jzlib/1.1.3_2</bundle> <!-- jzlib version is 1.1.3, but bundle is 1.1.3_2 -->
        <bundle dependency="true">mvn:org.bouncycastle/bcprov-ext-jdk15on/${bouncycastle.version}</bundle>
        <bundle dependency="true">mvn:org.bouncycastle/bcpkix-jdk15on/${bouncycastle.version}</bundle>
        <bundle dependency="true">mvn:commons-codec/commons-codec/${commons-codec.version}</bundle>
        <bundle dependency="true">mvn:org.apache.commons/commons-lang3/${commons-lang3.version}</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xpp3/${xpp3.servicemix.version}</bundle> <!-- from com.thoughtworks.xstream/xstream -->
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.kxml2/${kxml2.servicemix.version}</bundle>

        <!-- TODO: don't use wrap -->
        <bundle dependency="true">wrap:mvn:com.maxmind.geoip2/geoip2/${maxmind.version}</bundle> <!-- from geoip2 -->
        <bundle dependency="true">wrap:mvn:com.maxmind.db/maxmind-db/${maxmind-db.version}</bundle>

        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.reflections/${reflections.bundle.version}</bundle>
    </feature>

    <feature name="brooklyn-camp-brooklyn" version="${project.version}" description="Brooklyn CAMP REST API">
        <bundle>mvn:org.apache.brooklyn/brooklyn-camp/${project.version}</bundle>

        <feature>brooklyn-core</feature>
        <feature>brooklyn-camp-base</feature>
        <bundle dependency="true">mvn:commons-beanutils/commons-beanutils/${commons-beanutils.version}</bundle>
        <bundle dependency="true">mvn:commons-collections/commons-collections/${commons-collections.version}</bundle>
    </feature>

    <feature name="brooklyn-camp-base" version="${project.version}" description="Brooklyn CAMP Base">
        <bundle>mvn:org.apache.brooklyn.camp/camp-base/${project.version}</bundle>

        <feature>brooklyn-utils-common</feature>
        <bundle dependency="true">mvn:org.apache.commons/commons-compress/${commons-compress.version}</bundle>
        <bundle dependency="true">mvn:org.apache.commons/commons-lang3/${commons-lang3.version}</bundle>
    </feature>

    <feature name="brooklyn-camp-server" version="${project.version}" description="Brooklyn CAMP Server">
        <bundle>mvn:org.apache.brooklyn.camp/camp-server/${project.version}</bundle>

        <feature>brooklyn-camp-base</feature>
        <feature>brooklyn-utils-rest-swagger</feature>
        <feature>pax-jetty</feature>
    </feature>

    <feature name="brooklyn-rest-resources-prereqs" version="${project.version}" description="Brooklyn REST Resources Prerequisites">
        <feature>brooklyn-core</feature>
        <feature>brooklyn-rest-api</feature>
        <feature>brooklyn-camp-brooklyn</feature>
        <feature>brooklyn-camp-base</feature>

        <feature>cxf-jaxrs-with-optional-dependencies</feature>
        <bundle dependency="true">mvn:org.apache.cxf/cxf-rt-rs-security-cors/${cxf.version}</bundle>
        <bundle dependency="true">mvn:org.apache.cxf/cxf-rt-frontend-jaxrs/${cxf.version}</bundle>
        <bundle dependency="true">mvn:org.apache.cxf.karaf/cxf-karaf-commands/${cxf.version}</bundle>

        <bundle dependency="true">mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/${fasterxml.jackson.version}</bundle>

        <!-- should be deps of jax-rs-2.0 rest-api project -->
        <bundle dependency="true">mvn:javax.servlet/javax.servlet-api/${javax-servlet.version}</bundle>
        <bundle dependency="true">mvn:javax.ws.rs/javax.ws.rs-api/${jax-rs-api.version}</bundle>

        <config name="org.apache.cxf.osgi">
            org.apache.cxf.servlet.context = /v1
        </config>
    </feature>

    <feature name="cxf-jaxrs-with-optional-dependencies" version="${project.version}" description="cxf-jaxrs with optional dependencies">
        <feature>cxf-jaxrs</feature>
        
        <!-- otherwise causes jackson-jaxrs-json-provider to be rewired when this optional dep is installed -->
        <bundle dependency="true" start-level="35">mvn:com.fasterxml.jackson.module/jackson-module-jaxb-annotations/${fasterxml.jackson.version}</bundle>
    </feature>


    <feature name="brooklyn-rest-resources" version="${project.version}" description="Brooklyn REST Resources">
        <feature>brooklyn-rest-resources-prereqs</feature>
        <bundle>mvn:org.apache.brooklyn/brooklyn-rest-resources/${project.version}</bundle>
    </feature>

    <feature name="brooklyn-commands"  version="${project.version}"  description="Brooklyn Shell Commands">
        <bundle dependency="true">mvn:org.apache.brooklyn/brooklyn-launcher-common/${project.version}</bundle>
        <bundle>mvn:org.apache.brooklyn/brooklyn-commands/${project.version}</bundle>
    </feature>

    <feature name="brooklyn-software-winrm" version="${project.version}" description="Brooklyn WinRM Software Entities">
        <bundle>mvn:org.apache.brooklyn/brooklyn-software-winrm/${project.version}</bundle>
        <feature>brooklyn-core</feature>
        <bundle dependency="true">mvn:io.cloudsoft.windows/winrm4j/${winrm4j.version}</bundle>
        <bundle dependency="true">mvn:io.cloudsoft.windows/winrm4j-client/${winrm4j.version}</bundle>
        <bundle>mvn:org.apache.brooklyn/brooklyn-karaf-httpcomponents-extension/${project.version}</bundle>
        <feature>cxf-jaxws</feature>
        <feature>cxf-http-async</feature>
        <feature>cxf-ws-addr</feature>
    </feature>

    <feature name="brooklyn-policy"  version="${project.version}" description="Brooklyn Policies">
        <bundle>mvn:org.apache.brooklyn/brooklyn-policy/${project.version}</bundle>
        <feature>brooklyn-core</feature>
    </feature>

    <feature name="brooklyn-software-base"  version="${project.version}"  description="Brooklyn Software Base">
        <bundle>mvn:org.apache.brooklyn/brooklyn-software-base/${project.version}</bundle>
        <feature>brooklyn-software-winrm</feature>
        <feature>brooklyn-policy</feature>
    </feature>

    <feature name="brooklyn-jmxmp-agent" version="${project.version}" description="Brooklyn Secure JMXMP Agent">
        <bundle>mvn:org.apache.brooklyn/brooklyn-jmxmp-agent/${project.version}</bundle>
        <feature>brooklyn-core</feature>
        <bundle dependency="true">wrap:mvn:org.glassfish.external/opendmk_jmxremote_optional_jar/${opendmk_jmxremote_optional_jar.version}$Import-Package=javax.management.openmbean,*</bundle>
    </feature>

    <feature name="brooklyn-jmxrmi-agent" version="${project.version}" description="Brooklyn JMX RMI Agent">
        <bundle>mvn:org.apache.brooklyn/brooklyn-jmxrmi-agent/${project.version}</bundle>
    </feature>

    <feature name="brooklyn-locations-jclouds" version="${project.version}" description="Brooklyn Jclouds Location Targets">
        <bundle>mvn:org.apache.jclouds/jclouds-loadbalancer/${jclouds.version}</bundle>
        <feature>brooklyn-core</feature>
        <feature>jclouds-services-for-brooklyn</feature>
        <feature>jclouds-driver-sshj</feature>
        <feature>jclouds-driver-slf4j</feature>

        <!-- Same as allcompute -->
        <!-- As at jclouds 2.1.0 this pulls in snakeyaml 1.17 via jclouds-api-byon;
             I cannot see any way to prevent this, short of not using the jclouds feature
             definitions. Things we have tried include redeclaring that feature here
             with our preferred bundle and it works most places but at least one runtime
             (an RPM build of a downstream project installed to Docker) won't start as
             it seems to read the other feature definition.  We also tried the etc/overrides.properties
             but that did not prevent it from pulling in 1.17 at build, or if we built correctly,
             it did not prevent it from needing the 1.17 at runtime. Luckily having the two
             snakeyaml versions doesn't seem to be a problem. -->
        <feature>jclouds-all-compute</feature>
        <bundle dependency='true'>mvn:org.yaml/snakeyaml/1.17</bundle>

        <!-- Same as allblobstore -->
        <feature>jclouds-all-blobstore</feature>

        <bundle start-level="85">mvn:org.apache.brooklyn/brooklyn-locations-jclouds/${project.version}</bundle>
        <feature>brooklyn-software-winrm</feature>
        <feature>brooklyn-locations-jclouds-labs</feature>
    </feature>

    <feature name="brooklyn-locations-jclouds-labs" version="${project.version}" description="Brooklyn JClouds Labs Location Targets">
    </feature>

    <feature name="brooklyn-container-service" version="${project.version}" description="Brooklyn Container Service and Location Targets">
        <feature>brooklyn-core</feature>

        <bundle dependency='true'>mvn:com.fasterxml.jackson.module/jackson-module-jaxb-annotations/${fasterxml.jackson.version}</bundle>
        <bundle dependency='true'>mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/${fasterxml.jackson.version}</bundle>
        <bundle dependency='true'>mvn:com.fasterxml.jackson.datatype/jackson-datatype-jsr310/${fasterxml.jackson.version}</bundle>

        <!-- (1) -->
        <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jsr305/3.0.2_1</bundle>
        <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.generex/1.0.2_1</bundle>
        <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.automaton/1.11-8_1</bundle>
        <!-- (2) -->
        <bundle dependency='true'>wrap:mvn:com.squareup.okio/okio/1.15.0$Bundle-SymbolicName=squareup-okio&amp;Bundle-Version=1.15.0&amp;Export-Package=okio;version=1.15.0</bundle>
        <!-- (3) -->
        <bundle dependency='true'>wrap:mvn:com.squareup.okhttp3/okhttp/3.12.6$Bundle-SymbolicName=squareup-okhttp3&amp;Bundle-Version=3.12.6&amp;Import-Package=okio;version=1.15,*;resolution:=optional</bundle>
        <bundle dependency='true'>wrap:mvn:com.squareup.okhttp3/logging-interceptor/3.12.6$Bundle-SymbolicName=squareup-okhttp3-logging-interceptor&amp;Bundle-Version=3.12.6&amp;Import-Package=*;resolution:=mandatory</bundle>
        <!-- (4) -->
        <!-- these are the main required bundles for these features above -->
        <bundle>mvn:io.fabric8/zjsonpatch/0.3.0</bundle>
        <bundle>mvn:io.fabric8/kubernetes-model/${kubernetes-client.version}</bundle>
        <bundle>mvn:io.fabric8/kubernetes-client/${kubernetes-client.version}/jar/bundle</bundle>
        <bundle>mvn:io.fabric8/openshift-client/${kubernetes-client.version}/jar/bundle</bundle>

        <bundle dependency='true'>mvn:com.google.guava/guava/${guava.version}</bundle>
        <bundle start-level="85">mvn:org.apache.brooklyn/brooklyn-locations-container/${project.version}</bundle>
    </feature>

    <feature name="brooklyn-test-framework" version="${project.version}" description="Brooklyn Test Framework" >
        <bundle>mvn:org.apache.brooklyn/brooklyn-test-framework/${project.version}</bundle>
    </feature>

    <feature name="brooklyn-server-software-all" version="${project.version}" description="Brooklyn All Core Entities">
        <feature>brooklyn-software-base</feature>
        <feature>brooklyn-jmxmp-agent</feature>
        <feature>brooklyn-jmxrmi-agent</feature>
        <feature>brooklyn-test-framework</feature>
    </feature>

    <feature name="brooklyn-osgi-launcher" version="${project.version}" description="Brooklyn init">
        <feature>brooklyn-core</feature>
        <feature>brooklyn-server-software-all</feature>
        <feature>brooklyn-locations-jclouds</feature>
        <feature>brooklyn-container-service</feature>
        <bundle dependency="true">mvn:org.apache.brooklyn/brooklyn-launcher-common/${project.version}</bundle>
        <bundle start-level="90">mvn:org.apache.brooklyn/brooklyn-karaf-init/${project.version}</bundle>
        <bundle start-level="90">mvn:org.apache.brooklyn/brooklyn-karaf-start/${project.version}</bundle>
    </feature>



    <!-- copied from jclouds-karaf which has not released a version of the feature definition for the current jclouds version;
         * change `project.version` to `jclouds.version',
         * remove the "services",
         * create our own cut-down services (omitting the karaf bits)
         * comment out karaf jsch-agentproxy-jsch

         release notes:
         * As jclouds-karaf has not yet been released for the latest version of jclouds,
           selected karaf extensions for jclouds are not included. This includes the karaf CLI
           and the jsch-agentproxy-jsch definition.

         if there is a current version of jclouds-karaf we can remove this block / revert this commit
     -->

        <feature name='jclouds-all-blobstore' description='jclouds - all - macro feature to bundle all blobstores' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-s3</feature>
            <feature version='${jclouds.version}'>jclouds-aws-s3</feature>
            <feature version='${jclouds.version}'>jclouds-azureblob</feature>
            <feature version='${jclouds.version}'>jclouds-api-atmos</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-swift</feature>
            <feature version='${jclouds.version}'>jclouds-b2</feature>
            <feature version='${jclouds.version}'>jclouds-google-cloud-storage</feature>
            <feature version='${jclouds.version}'>jclouds-rackspace-cloudfiles-uk</feature>
            <feature version='${jclouds.version}'>jclouds-rackspace-cloudfiles-us</feature>
        </feature>

        <feature name='jclouds-all-compute' description='jclouds - all - macro feature to bundle all computes' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-aws-ec2</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-nova</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-nova-ec2</feature>
            <feature version='${jclouds.version}'>jclouds-api-byon</feature>
            <feature version='${jclouds.version}'>jclouds-api-ec2</feature>
            <feature version='${jclouds.version}'>jclouds-gogrid</feature>
            <feature version='${jclouds.version}'>jclouds-api-elasticstack</feature>
            <feature version='${jclouds.version}'>jclouds-elastichosts-lon-p</feature>
            <feature version='${jclouds.version}'>jclouds-elastichosts-sat-p</feature>
            <feature version='${jclouds.version}'>jclouds-elastichosts-lon-b</feature>
            <feature version='${jclouds.version}'>jclouds-openhosting-east1</feature>
            <feature version='${jclouds.version}'>jclouds-serverlove-z1-man</feature>
            <feature version='${jclouds.version}'>jclouds-skalicloud-sdg-my</feature>
            <feature version='${jclouds.version}'>jclouds-go2cloud-jhb1</feature>
            <feature version='${jclouds.version}'>jclouds-softlayer</feature>
            <feature version='${jclouds.version}'>jclouds-api-cloudstack</feature>
            <feature version='${jclouds.version}'>jclouds-rackspace-cloudservers-us</feature>
            <feature version='${jclouds.version}'>jclouds-rackspace-cloudservers-uk</feature>
            <feature version='${jclouds.version}'>jclouds-google-compute-engine</feature>
            <feature version='${jclouds.version}'>jclouds-digitalocean2</feature>
            <feature version='${jclouds.version}'>jclouds-profitbricks</feature>
            <feature version='${jclouds.version}'>jclouds-api-docker</feature>
            <feature version='${jclouds.version}'>jclouds-packet</feature>
            <feature version='${jclouds.version}'>jclouds-azurecompute-arm</feature>
        </feature>

        <feature name='jclouds-guice' description='jclouds - Google Guice' version='${jclouds.version}'>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.javax-inject/${javax.inject.bundle.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/${aopalliance.bundle.version}</bundle>
            <bundle>mvn:com.google.inject/guice/${guice.version}</bundle>
            <bundle>mvn:com.google.inject.extensions/guice-assistedinject/${guice.version}</bundle>
            <bundle>mvn:com.google.inject.extensions/guice-multibindings/${guice.version}</bundle>
        </feature>

        <feature name='jclouds' description='jclouds' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-guice</feature>
            <bundle dependency="true">mvn:javax.ws.rs/javax.ws.rs-api/${javax.ws.rs.api.version}</bundle>
            <bundle dependency='true'>mvn:com.google.guava/guava/${guava.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.oauth-commons/${net.oauth.bundle.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jersey-core/${jersey.bundle.version}</bundle>
            <bundle dependency='true'>mvn:com.google.code.gson/gson/${gson.version}</bundle>
            <bundle>mvn:org.apache.jclouds/jclouds-core/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-blobstore' description='jclouds - blobstore' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle>mvn:org.apache.jclouds/jclouds-blobstore/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-compute' description='jclouds - compute' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds</feature>
            <feature version='${jclouds.version}'>jclouds-scriptbuilder</feature>
            <bundle>mvn:org.apache.jclouds/jclouds-compute/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-loadbalancer' description='jclouds - loadbalancer' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds/jclouds-loadbalancer/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-scriptbuilder' description='jclouds - scriptbuilder' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle>mvn:org.apache.jclouds/jclouds-scriptbuilder/${jclouds.version}</bundle>
        </feature>

        <!-- APIS -->
        <feature name='jclouds-api-atmos' description='jclouds - API - Atmos' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <bundle>mvn:org.apache.jclouds.api/atmos/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-byon' description='jclouds - API - Byon' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle dependency='true'>mvn:org.yaml/snakeyaml/${snakeyaml.version}</bundle>
            <bundle>mvn:org.apache.jclouds.api/byon/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-chef" description="jclouds - API - Chef" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.api/chef/${jclouds.chef.version}</bundle>
        </feature>

        <feature name="jclouds-api-cloudstack" description="jclouds - API - Cloudstack" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.api/cloudstack/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-cloudwatch" description="jclouds - API - Cloudwatch" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-sts</feature>
            <bundle>mvn:org.apache.jclouds.api/cloudwatch/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-docker' description='jclouds - API - Docker' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-driver-bouncycastle</feature>
            <feature version='${jclouds.version}'>jclouds-driver-okhttp</feature>
            <feature version='${jclouds.version}'>jclouds-api-oauth</feature>
            <bundle>mvn:org.apache.jclouds.api/docker/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-ec2" description="jclouds - API - EC2" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-sts</feature>
            <bundle>mvn:org.apache.jclouds.api/ec2/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-elasticstack' description='jclouds - API - Elasticstack' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.api/elasticstack/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-filesystem' description='jclouds - API - FileSystem' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <bundle>mvn:org.apache.jclouds.api/filesystem/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-oauth" description="jclouds - API - OAuth" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.api/oauth/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-openstack-cinder' description='jclouds - API - OpenStack Cinder' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-keystone</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/openstack-common/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.api/openstack-cinder/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-openstack-keystone' description='jclouds - API - OpenStack Keystone' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle>mvn:org.apache.jclouds.api/openstack-keystone/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-openstack-nova' description='jclouds - API - OpenStack Nova' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-keystone</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/openstack-common/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds.api/openstack-neutron/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.api/openstack-nova/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-openstack-nova-ec2' description='jclouds - API - OpenStack Nova EC2' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-openstack-nova</feature>
            <feature version='${jclouds.version}'>jclouds-api-ec2</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/openstack-common/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.api/openstack-nova-ec2/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-openstack-swift' description='jclouds - API - OpenStack Swift' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-keystone</feature>
            <bundle>mvn:org.apache.jclouds.api/openstack-swift/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-api-openstack-trove' description='jclouds - API - OpenStack Trove' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-keystone</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/openstack-common/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.api/openstack-trove/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-rackspace-clouddns" description="Rackspace Cloud DNS API" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle>mvn:org.apache.jclouds.api/rackspace-clouddns/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-rackspace-cloudfiles" description="Rackspace Cloud Files API" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-swift</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle>mvn:org.apache.jclouds.api/rackspace-cloudfiles/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-rackspace-cloudidentity" description="Rackspace Cloud Identity API" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-keystone</feature>
            <bundle>mvn:org.apache.jclouds.api/rackspace-cloudidentity/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-rackspace-cloudloadbalancers" description="Rackspace Cloud Load Balancers API" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-loadbalancer</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-keystone</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle>mvn:org.apache.jclouds.api/rackspace-cloudloadbalancers/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-route53" description="jclouds - API - Route53" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-api-sts</feature>
            <bundle>mvn:org.apache.jclouds.api/route53/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-s3" description="jclouds - API - S3" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <feature version='${jclouds.version}'>jclouds-api-sts</feature>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.java-xmlbuilder/${java-xmlbuilder.bundle.version}</bundle>
            <bundle>mvn:org.apache.jclouds.api/s3/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-sqs" description="jclouds - API - SQS" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-api-sts</feature>
            <bundle>mvn:org.apache.jclouds.api/sqs/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-api-sts" description="jclouds - API - STS" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle>mvn:org.apache.jclouds.api/sts/${jclouds.version}</bundle>
        </feature>

        <!-- PROVIDERS -->
        <feature name='jclouds-aws-cloudwatch' description='Amazon Web Service - Cloudwatch' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-cloudwatch</feature>
            <bundle>mvn:org.apache.jclouds.provider/aws-cloudwatch/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-aws-ec2' description='Amazon Web Service - EC2' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-ec2</feature>
            <bundle>mvn:org.apache.jclouds.provider/aws-ec2/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-aws-route53' description='Amazon Web Service - Route 53' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-route53</feature>
            <bundle>mvn:org.apache.jclouds.provider/aws-route53/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-aws-s3' description='Amazon Web Service - S3' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-s3</feature>
            <bundle>mvn:org.apache.jclouds.provider/aws-s3/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-aws-sqs' description='Amazon Web Service - SQS' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-sqs</feature>
            <bundle>mvn:org.apache.jclouds.provider/aws-sqs/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-aws-sts' description='Amazon Web Service - STS' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-sts</feature>
            <bundle>mvn:org.apache.jclouds.provider/aws-sts/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-azureblob' description='Azureblob' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <bundle>mvn:org.apache.jclouds.provider/azureblob/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-azurecompute-arm' description='Components to access Azure Compute ARM' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-azureblob</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.api/oauth/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.okio/${okio.bundle.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.okhttp/${okhttp.bundle.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds.driver/jclouds-okhttp/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.provider/azurecompute-arm/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-digitalocean2' description='Components to access DigitalOcean v2' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-oauth</feature>
            <bundle>mvn:org.apache.jclouds.provider/digitalocean2/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-dynect' description='DynECT Managed DNS' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle>mvn:org.apache.jclouds.provider/dynect/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-elastichosts-lon-b' description='Elastichosts Bluesquare London' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-elasticstack</feature>
            <bundle>mvn:org.apache.jclouds.provider/elastichosts-lon-b/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-elastichosts-lon-p' description='Elastichosts Peer1 London' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-elasticstack</feature>
            <bundle>mvn:org.apache.jclouds.provider/elastichosts-lon-p/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-elastichosts-sat-p' description='Elastichosts Peer1 San Antonio' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-elasticstack</feature>
            <bundle>mvn:org.apache.jclouds.provider/elastichosts-sat-p/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-elastichosts-lax-p' description='Elastichosts Peer1 Los Angeles' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-elasticstack</feature>
            <bundle>mvn:org.apache.jclouds.provider/elastichosts-lax-p/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-elastichosts-tor-p' description='Elastichosts Peer1 Toronto' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-elasticstack</feature>
            <bundle>mvn:org.apache.jclouds.provider/elastichosts-tor-p/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-glesys' description='GleSYS' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.provider/glesys/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-go2cloud-jhb1' description='Go2Cloud implementation targeted to Johannesburg1' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-elasticstack</feature>
            <bundle>mvn:org.apache.jclouds.provider/go2cloud-jhb1/${jclouds.version}</bundle>
        </feature>
        <feature name='jclouds-gogrid' description='GoGrid' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.provider/gogrid/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-google-compute-engine' description='Components to access Google Compute Engine' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-oauth</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/googlecloud/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.provider/google-compute-engine/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-openhosting-east1' description='Open Hosting for East1' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.api/elasticstack/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.provider/openhosting-east1/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-packet' description='Packet' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.provider/packet/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-profitbricks' description='Components to access ProfitBricks' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.provider/profitbricks/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-cloudblockstorage-uk' description='Racksapce Cloud Block Storage UK' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-openstack-cinder</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-cloudblockstorage-uk/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-cloudblockstorage-us' description='Racksapce Cloud Block Storage US' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-openstack-cinder</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-cloudblockstorage-us/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-cloudloadbalancers-us' description='Cloud Load Balancers US' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/openstack-common/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds/jclouds-loadbalancer/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds/jclouds-scriptbuilder/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds/jclouds-compute/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.api/rackspace-cloudloadbalancers/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-cloudloadbalancers-us/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-cloudloadbalancers-uk' description='Cloud Load Balancers UK' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/openstack-common/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds/jclouds-loadbalancer/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds/jclouds-scriptbuilder/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.api/rackspace-cloudloadbalancers/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-cloudloadbalancers-uk/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-cloudservers-us' description='Rackspace Cloudservers US' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-nova</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-cloudservers-us/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-cloudservers-uk' description='Rackspace Cloudservers UK' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-api-openstack-nova</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-cloudservers-uk/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-clouddns-us' description='Racksapce Cloud DNS US' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-clouddns</feature>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-clouddns-us/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-clouddns-uk' description='Racksapce Cloud DNS UK' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-clouddns</feature>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-clouddns-uk/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-cloudfiles-uk' description='Rackspace Cloud Files UK' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudfiles</feature>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-cloudfiles-uk/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-rackspace-cloudfiles-us' description='Rackspace Cloud Files US' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudfiles</feature>
            <feature version='${jclouds.version}'>jclouds-api-rackspace-cloudidentity</feature>
            <bundle>mvn:org.apache.jclouds.provider/rackspace-cloudfiles-us/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-serverlove-z1-man' description='Serverlove implementation targeted to Manchester' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.api/elasticstack/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.provider/serverlove-z1-man/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-skalicloud-sdg-my' description='SkaliCloud implementation targeted to Malaysia' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.api/elasticstack/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.provider/skalicloud-sdg-my/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-softlayer' description='Components to access SoftLayer' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <bundle>mvn:org.apache.jclouds.provider/softlayer/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-b2' description='Backblaze B2' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <bundle>mvn:org.apache.jclouds.provider/b2/${jclouds.version}</bundle>
        </feature>

        <feature name='jclouds-google-cloud-storage' description='Google Cloud Storage' version='${jclouds.version}'>
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <feature version='${jclouds.version}'>jclouds-api-oauth</feature>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/googlecloud/${jclouds.version}</bundle>
            <bundle>mvn:org.apache.jclouds.provider/google-cloud-storage/${jclouds.version}</bundle>
        </feature>

        <!-- DRIVERS -->
        <feature name="jclouds-driver-apachehc" description="Apache HTTP Components Client driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle dependency='true'>mvn:org.apache.httpcomponents/httpcore-osgi/${httpcore.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.httpcomponents/httpclient-osgi/${httpclient.version}</bundle>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-apachehc/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-bouncycastle" description="Bouncycastle driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle dependency="true">mvn:org.bouncycastle/bcprov-ext-jdk15on/${bcprov.version}</bundle>
            <bundle dependency="true">mvn:org.bouncycastle/bcpkix-jdk15on/${bcprov.version}</bundle>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-bouncycastle/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-enterprise" description="Enterprise driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <feature version='${jclouds.version}'>jclouds-driver-bouncycastle</feature>
            <feature version='${jclouds.version}'>jclouds-driver-netty</feature>
            <feature version='${jclouds.version}'>jclouds-driver-joda</feature>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-enterprise/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-joda" description="Joda driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle dependency='true'>mvn:joda-time/joda-time/2.1</bundle>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-joda/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-jsch" description="JSCH driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-driver-bouncycastle</feature>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jsch/${jsch.bundle.version}</bundle>
            <!-- <bundle dependency='true'>mvn:org.apache.jclouds.karaf.bundles/jsch-agentproxy-jsch/${jclouds.version}</bundle> -->
            <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.connector-factory/${jsch.agentproxy.version}</bundle>
            <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.usocket-nc/${jsch.agentproxy.version}</bundle>
            <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.sshagent/${jsch.agentproxy.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jzlib/${jzlib.bundle.version}</bundle>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-jsch/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-log4j" description="Log4j driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-log4j/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-netty" description="Netty driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle dependency='true'>mvn:io.netty/netty/${netty.bundle.version}</bundle>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-netty/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-okhttp" description="OkHttp Client driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.okio/${okio.bundle.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.okhttp/${okhttp.bundle.version}</bundle>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-okhttp/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-slf4j" description="SLF4J driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds</feature>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-slf4j/${jclouds.version}</bundle>
        </feature>

        <feature name="jclouds-driver-sshj" description="SSHJ driver for jclouds" version="${jclouds.version}">
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-driver-bouncycastle</feature>
            <!--TODO update ${jzlib.bundle.version}-->
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jzlib/1.1.3_2</bundle>
            <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.core/0.0.9</bundle>
            <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jsch-agentproxy-sshj/0.0.9_1</bundle>
            <bundle dependency="true">mvn:net.i2p.crypto/eddsa/0.1.0</bundle>
            <bundle dependency="true">mvn:com.hierynomus/sshj/0.20.0</bundle>
            <bundle>mvn:org.apache.jclouds.driver/jclouds-sshj/${jclouds.version}</bundle>
        </feature>

    <!-- BROOKLYN: omitting this
         <feature name="jclouds-services" description="OSGi Service Factories for jclouds" version="${jclouds.version}">
             <configfile finalname="${karaf.etc}/org.apache.jclouds.credentials.cfg">mvn:org.apache.jclouds.karaf/jclouds-karaf/${jclouds.version}/cfg/credentials</configfile>
             <feature>aries-blueprint</feature>
             <feature version='${jclouds.version}'>jclouds-compute</feature>
             <feature version='${jclouds.version}'>jclouds-blobstore</feature>
             <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jsch/${jsch.bundle.version}</bundle>
             <bundle dependency='true'>mvn:org.apache.jclouds.karaf.bundles/jsch-agentproxy-jsch/${jclouds.version}</bundle>
             <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.connector-factory/${jsch.agentproxy.version}</bundle>
             <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.usocket-nc/${jsch.agentproxy.version}</bundle>
             <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.sshagent/${jsch.agentproxy.version}</bundle>
             <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jzlib/${jzlib.bundle.version}</bundle>
             <bundle dependency='true'>mvn:org.bouncycastle/bcprov-ext-jdk15on/${bcprov.version}</bundle>
             <bundle dependency='true'>mvn:org.apache.jclouds.driver/jclouds-bouncycastle/${jclouds.version}</bundle>
             <bundle dependency='true'>mvn:org.apache.jclouds.driver/jclouds-slf4j/${jclouds.version}</bundle>
             <bundle dependency='true'>mvn:org.apache.jclouds.common/googlecloud/${jclouds.version}</bundle>
             <bundle>mvn:org.apache.jclouds.driver/jclouds-jsch/${jclouds.version}</bundle>
             <bundle>mvn:org.apache.jclouds.driver/jclouds-log4j/${jclouds.version}</bundle>
             <bundle>mvn:org.apache.jclouds.karaf/core/${jclouds.version}</bundle>
             <bundle>mvn:org.apache.jclouds.karaf/cache/${jclouds.version}</bundle>
             <bundle>mvn:org.apache.jclouds.karaf/recipe/${jclouds.version}</bundle>
             <bundle>mvn:org.apache.jclouds.karaf/services/${jclouds.version}</bundle>
         </feature>

             <feature name="jclouds-commands" description="Karaf Commands for jclouds" version="${jclouds.version}">
                 <configfile finalname="/etc/org.apache.jclouds.shell.cfg">mvn:org.apache.jclouds.karaf/jclouds-karaf/${jclouds.version}/cfg/shell</configfile>
                 <feature>shell-compat</feature>
                 <feature version='${jclouds.version}'>jclouds-services</feature>
                 <bundle dependency="true">mvn:org.codehaus.groovy/groovy/${groovy.version}</bundle>
                 <bundle dependency="true">mvn:org.codehaus.groovy/groovy-jsr223/${groovy.version}</bundle>
                 <bundle>mvn:org.apache.jclouds.karaf/core/${jclouds.version}</bundle>
                 <bundle>mvn:org.apache.jclouds.karaf/recipe/${jclouds.version}</bundle>
                 <bundle>mvn:org.apache.jclouds.karaf/commands/${jclouds.version}</bundle>
             </feature>

             <feature name="jclouds-chef" description="jclouds Chef Services and Commands" version="${jclouds.version}">
                 <feature version='${jclouds.version}'>jclouds-api-chef</feature>
                 <feature version='${jclouds.version}'>jclouds-commands</feature>
                 <bundle dependency='true'>mvn:org.apache.jclouds.driver/jclouds-slf4j/${jclouds.version}</bundle>
                 <bundle>mvn:org.apache.jclouds.karaf.chef/cache/${jclouds.version}</bundle>
                 <bundle>mvn:org.apache.jclouds.karaf.chef/services/${jclouds.version}</bundle>
                 <bundle>mvn:org.apache.jclouds.karaf.chef/commands/${jclouds.version}</bundle>
             </feature>

             <feature name="jclouds-url-handler" description="Url Handler for jclouds Blobs" version="${jclouds.version}">
                 <feature>aries-blueprint</feature>
                 <feature version='${jclouds.version}'>jclouds-services</feature>
                 <bundle>mvn:org.apache.jclouds.karaf/urlhandler/${jclouds.version}</bundle>
             </feature>
     -->

    <!-- BROOKLYN: changing this! -->
        <feature name="jclouds-services-for-brooklyn" description="OSGi Service Factories for jclouds" version="${jclouds.version}">
            <feature>aries-blueprint</feature>
            <feature version='${jclouds.version}'>jclouds-compute</feature>
            <feature version='${jclouds.version}'>jclouds-blobstore</feature>
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jsch/${jsch.bundle.version}</bundle>

            <feature version='${jclouds.version}'>jclouds-driver-jsch</feature>
<!-- (BROOKLYN: not sure if above works in karaf; the original definition is that below)
            <bundle dependency='true'>mvn:org.apache.jclouds.karaf.bundles/jsch-agentproxy-jsch/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.connector-factory/${jsch.agentproxy.version}</bundle>
            <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.usocket-nc/${jsch.agentproxy.version}</bundle>
            <bundle dependency='true'>mvn:com.jcraft/jsch.agentproxy.sshagent/${jsch.agentproxy.version}</bundle>
-->
            <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jzlib/${jzlib.bundle.version}</bundle>
            <bundle dependency='true'>mvn:org.bouncycastle/bcprov-ext-jdk15on/${bcprov.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds.driver/jclouds-bouncycastle/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds.driver/jclouds-slf4j/${jclouds.version}</bundle>
            <bundle dependency='true'>mvn:org.apache.jclouds.common/googlecloud/${jclouds.version}</bundle>
        </feature>

    <!-- END BROOKLYN JCLOUDS OVERRIDE -->

</features>
